<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renkli RÃ¼yalar Oteli</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/home.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/sss.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/wheel.css}" />

</head>
<body>

<!-- Navbar -->
<nav>
    <div class="navbar-container">
        <a href="/home" class="logo">Renkli RÃ¼yalar</a>
        <div class="nav-links">
            <a href="/rooms">OdalarÄ± GÃ¶rÃ¼ntÃ¼le</a>
            <a href="/cancel-reservation" class="cancel-button">Rezervasyonu Ä°ptal Et</a>
            <button id="wheelButton" class="wheel-button" onclick="showWheelModal()">ğŸ¡ Ã‡arkÄ± Ã‡evir</button>
        </div>
        <div class="user-actions">
            <div class="user-actions">
            <span th:if="${session.loggedInUser != null}">
                HoÅŸgeldin, <b th:text="${session.loggedInUser}"></b>!
                <a th:href="@{/logout}" class="logout-button">Ã‡Ä±kÄ±ÅŸ Yap</a>
            </span>
                <span th:if="${session.loggedInUser == null}">
                <a th:href="@{/login}" class="auth-button">Login</a>
                <a th:href="@{/register}" class="auth-button">KayÄ±t Ol</a>
            </span>
            </div>
        </div>
</nav>
<!-- Ã‡ark Modal -->
<div id="wheelModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeWheelModal()">&times;</span>
        <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <div class="wheel" id="wheel">
                <div class="wheel-section" data-discount="5">%5</div>
                <div class="wheel-section" data-discount="10">%10</div>
                <div class="wheel-section" data-discount="15">%15</div>
                <div class="wheel-section" data-discount="20">%20</div>
                <div class="wheel-section" data-discount="25">%25</div>
                <div class="wheel-section" data-discount="30">%30</div>
                <div class="wheel-section" data-discount="35">%35</div> <!-- EklenmiÅŸ dilim -->
                <div class="wheel-section" data-discount="40">%40</div> <!-- EklenmiÅŸ dilim -->
            </div>
        </div>
        <button id="spinButton" onclick="spinWheel()">Ã‡arkÄ± Ã‡evir</button>
        <div id="result"></div>
    </div>
</div>

<script>
    function showWheelModal() {
        document.getElementById('wheelModal').style.display = 'block';
    }

    function closeWheelModal() {
        document.getElementById('wheelModal').style.display = 'none';
    }

    function spinWheel() {
        const wheel = document.getElementById('wheel');
        const result = document.getElementById('result');
        const spinButton = document.getElementById('spinButton');

        // Butonu devre dÄ±ÅŸÄ± bÄ±rak
        spinButton.disabled = true;

        // Rastgele derece oluÅŸtur (6 dilim iÃ§in 360/6 = 60 derece aralÄ±klarla)
        const sections = 6;
        const degreesPerSection = 360 / sections;
        const randomDegrees = Math.floor(Math.random() * 360) + 1440; // En az 4 tam tur

        // Ã‡arkÄ± dÃ¶ndÃ¼r
        wheel.style.transition = 'transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
        wheel.style.transform = `rotate(${randomDegrees}deg)`;

        // DÃ¶nÃ¼ÅŸ bittiÄŸinde
        setTimeout(() => {
            const actualRotation = randomDegrees % 360;
            const sectionIndex = Math.floor((360 - (actualRotation % 360)) / degreesPerSection);
            const discount = document.querySelectorAll('.wheel-section')[sectionIndex].getAttribute('data-discount');

            result.innerHTML = `Tebrikler! %${10-discount} indirim kazandÄ±nÄ±z!`;
            spinButton.disabled = false;

            // Backend'e kazanÄ±lan indirimi gÃ¶nder
            fetch('/api/discount/spin', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'user-id': 'test-user' // GerÃ§ek uygulamada kullanÄ±cÄ± ID'si dinamik olmalÄ±
                },
                body: JSON.stringify({ discountPercentage: discount })
            });
        }, 5000);
    }

    // Modal dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda kapatma
    window.onclick = function(event) {
        const modal = document.getElementById('wheelModal');
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
<section class="welcome-section" th:style="'background-image: url(' + @{/homeimages/otel.jpg} + '); background-size: cover; background-position: center; background-repeat: no-repeat;'">
    <h1>Renkli RÃ¼yalar Oteli'ne HoÅŸgeldiniz</h1>
    <p>Konforun ve lÃ¼ksÃ¼n buluÅŸma noktasÄ±.</p>
    <a href="/rooms" class="cta-button">OdalarÄ± KeÅŸfet</a>
</section>


<!-- Otel Resimleri Galerisi -->
<section id="hotel-gallery">
    <h2>Otelimizin GÃ¶rselleri</h2>
    <div class="gallery">
        <div class="gallery-item">
            <img th:src="@{'/homeimages/resim1.webp'}" alt="Otel Resmi 1" class="room-image">
        </div>
        <div class="gallery-item">
            <img th:src="@{'/homeimages/resim2.jpg'}" alt="Otel Resmi 2" class="room-image">
        </div>
        <div class="gallery-item">
            <img th:src="@{'/homeimages/resim3.jpg'}" alt="Otel Resmi 3" class="room-image">
        </div>
        <div class="gallery-item">
            <img th:src="@{'/homeimages/resim4.jpg'}" alt="Otel Resmi 4" class="room-image">
        </div>
    </div>
</section>

<!-- Otel HakkÄ±nda BÃ¶lÃ¼mÃ¼ -->
<section id="hotel-info">
    <h2>Otelimiz HakkÄ±nda</h2>
    <p>Renkli RÃ¼yalar Oteli, misafirlerine lÃ¼ks bir deneyim sunmak amacÄ±yla inÅŸa edilmiÅŸtir. Otelimiz, modern olanaklarla donatÄ±lmÄ±ÅŸ, huzurlu bir ortamda konaklama imkanÄ± sunuyor.</p>
    <ul>
        <li>Ãœcretsiz Wi-Fi</li>
        <li>Spa ve SaÄŸlÄ±k Merkezi</li>
        <li>Restoran ve Kafeler</li>
        <li>YÃ¼zme Havuzu</li>
        <li>24 Saat Resepsiyon</li>
    </ul>
</section>

<!-- Yorumlar BÃ¶lÃ¼mÃ¼ -->
<section id="comments-section">
    <h2>Yorumlar</h2>
    <div class="comment-form">
        <input type="text" placeholder="AdÄ±nÄ±z" id="nameInput" />
        <textarea placeholder="Yorumunuz" id="commentInput"></textarea>
        <button onclick="submitComment()">Yorum Yap</button>
    </div>
    <div class="comments-list" id="comments-list">
        <!-- Yorumlar burada gÃ¶sterilecek -->
    </div>
</section>

<!-- SSS BÃ¶lÃ¼mÃ¼ -->
<<section id="contact-info">
    <div class="contact-container">
        <div class="contact-details">
            <h2>Ä°letiÅŸim Bilgileri</h2>
            <ul>
                <li>ğŸ“§ Email: info@renklioteli.com</li>
                <li>ğŸ“ Telefon: +90 555 123 45 67</li>
                <li>ğŸ“ Adres: BeylikdÃ¼zÃ¼, Ä°stanbul, TÃ¼rkiye</li>
            </ul>
        </div>
        <div class="sss-container">
            <a href="/sss" class="sss-button" target="_blank">SÄ±kÃ§a Sorulan Sorular</a>
        </div>
    </div>
</section>




<script>
    // SSS FonksiyonlarÄ±
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('showFaqButton').addEventListener('click', function() {
            const faqContent = document.getElementById('faqContent');
            if (faqContent.style.display === 'none') {
                faqContent.style.display = 'block';
                this.textContent = 'SSS\'leri Gizle';
            } else {
                faqContent.style.display = 'none';
                this.textContent = 'SSS\'leri GÃ¶rÃ¼ntÃ¼le';
            }
        });

        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const faqItem = question.parentElement;
                const wasActive = faqItem.classList.contains('active');

                // TÃ¼m diÄŸer SSS Ã¶ÄŸelerini kapat
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });

                // TÄ±klanan Ã¶ÄŸeyi aÃ§/kapat
                if (!wasActive) {
                    faqItem.classList.add('active');
                }
            });
        });
    });
</script>
<!-- Footer -->
<footer>
    <p> 2024 Renkli RÃ¼yalar Oteli - TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
</footer>

<script>
    function submitComment() {
        const commentsList = document.getElementById('comments-list');
        const nameInput = document.getElementById('nameInput').value;
        const commentInput = document.getElementById('commentInput').value;

        if (nameInput && commentInput) {
            const newComment = document.createElement('div');
            newComment.classList.add('comment-item');
            newComment.innerHTML = `<p><strong>${nameInput}</strong>: ${commentInput}</p>`;
            commentsList.appendChild(newComment);
            document.getElementById('nameInput').value = '';
            document.getElementById('commentInput').value = '';
        } else {
            alert('LÃ¼tfen adÄ±nÄ±zÄ± ve yorumunuzu girin.');
        }
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const galleryItems = document.querySelectorAll('.gallery-item');

        galleryItems.forEach(item => {
            item.addEventListener('click', function() {
                this.classList.toggle('enlarged');
            });
        });

        // Close enlarged image when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.gallery-item')) {
                document.querySelectorAll('.gallery-item.enlarged').forEach(item => {
                    item.classList.remove('enlarged');
                });
            }
        });
    });
</script>
</body>
</html>
